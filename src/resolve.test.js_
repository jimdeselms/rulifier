import { resolve, proxify } from './rulify'
import { RAW_VALUE } from './common'

describe('resolve', () => {
    test('simple object', async () => {
        const p = resolve(5, {})

        expect(p).toBe(5)
    })

    test('simple proxified object', () => {
        const p = resolve(prox({a: 1}), {})

        expect(p).toMatch({a: 1})
    })
})

function prox(obj) {
    const caches = {
        proxyCache: new WeakMap(),
        resolvedValueCache: new WeakMap(),
    }


    return proxify(obj, {}, undefined, undefined, caches)
}
